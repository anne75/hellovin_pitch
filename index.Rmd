---
title       : Wine Guess Game
subtitle    : What is it ? How it works ?
author      : anne75
job         : 
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
---

## What is it ?

The wine Guess Game is a very simple prediction game.  

The player should (or pretend to) have a glass of red wine in hand.
By looking at it and smelling it, he/she assesses the levels of:      
 - tannins   
 - spice   
 - aromas  
present in the wine.

Then the player enters those levels on the app by the use of sliders.

The algorithm predicts which wine the player has in hand and plots where it comes from.

---

## The data

The data used for the prediction comes from the ` FactoMiner ` package. 
```{r, echo=FALSE, message=FALSE, warning=FALSE}
library("ggmap")
library("tree")
library("mapproj")
library("tree")
data("wine", package ="FactoMineR")
```
It is a  small dataset of dimentions `r paste0(nrow(wine),'x',ncol(wine))`.

It is limited to 3 wine appellations among the Loire valley red wines:   
 - Bourgueil   
 - Chinon   
 - Saumur  

Those appellations have strict requirements in term of geographical origin.

---

### Here it is represented:   


```{r, echo=FALSE, fig.height=6, fig.width=8, fig.align='center'}
load("../map_df")
load("../bkgd_map")
bkgd + 
  geom_polygon(data =aoc_list$Bourgueil, aes(x = long, y = lat, group = group),
                  colour = 'red', fill = 'red', alpha = .4, size = .3) +
  geom_polygon(data =aoc_list$Chinon, aes(x = long, y = lat, group = group),
                  colour = 'orange', fill = 'orange', alpha = .4, size = .3) +
  geom_polygon(data =aoc_list$Saumur, aes(x = long, y = lat, group = group),
                  colour = 'darkred', fill = 'darkred', alpha = .4, size = .3) +
  ggtitle('Wine geographical origin') +
  annotate("text",x = -.2, y = 47.2, colour='darkred', label="SAUMUR", size=10) +
  annotate("text",x = .3, y = 47.1, colour='orange', label="CHINON", size=10) +
  annotate("text",x = .15, y = 47.3, colour='red', label="BOURGUEIL", size=10 )
```

Terroir is a very serious topic, regulations impose a geographical origin. So data was downloaded from the [French open data website](http://www.data.gouv.fr/) to obtain and plot them

---

## The Algorithm

The emphasis was put on user-friendliness.
A very simple tree was chosen, as to select a limited number of attributes the player would have to enter.

This is the result of the tree:   
```{r, echo=F, fig.width=7, fig.height=6}
vin<-wine[,c(1,4,7,17)]
  names(vin)<-c("label","aroma","spice", "tannin")
  levels(vin$label)<-c("Saumur","Bourgueil", "Chinon") #fix a syntax error
  vintree<-tree(label~., data=vin, control=tree.control(minsize = 1, nobs=21) )
plot(vintree)
text(vintree)
```

---

## Have fun

From the tree presented above:   

  - You have a Saumur if you have more tannins and spices.   
  - You have a Bourgueil if you have low tannins but high aromas.   
  - You have a Chinon if you have a complex smell.   

If you are curious, here are some details about the tree:   
``` {r, echo=FALSE}
  summary(vintree)
```
